var socket;socket=io.connect();
$(document).ready(function(){$("#formPesquisaUsuario").submit(function(a){$("#formPesquisaUsuario").attr("action","/u/procurar/"+$("#pesquisaUsuario").val());validaPesquisa($("#pesquisaUsuario").val())||a.preventDefault()});$("#formPesquisaUsuarioNav").submit(function(a){$("#formPesquisaUsuarioNav").attr("action","/u/procurar/"+$("#pesquisaUsuarioNav").val());validaPesquisa($("#pesquisaUsuarioNav").val())||a.preventDefault()});$("#submitFormPesquisaUsuarioNav").click(function(){$("#formPesquisaUsuarioNav").submit()});$("#btnUploadFoto").click(function(){$("#fileFoto").click()});
$("#fileFoto").change(function(a){$("#fotoPreview").attr("src",URL.createObjectURL(a.target.files[0]));"block"!==$("#modalPostar").css("display")&&$("#btnModalPostar").click()});$("#fotoPreview").click(function(){$("#fileFoto").click()});$("#formPost").submit(function(a){$("#btnPostar").prop("disabled",!0);var b=new FormData;$.each($("#fileFoto")[0].files,function(a,c){b.append("fileFoto-"+a,c)});b.append("descricao",$('#formPost [name\x3d"descricao"]').val());$.ajax({url:"p/novo",data:b,cache:!1,
contentType:!1,processData:!1,method:"POST",type:"POST",success:function(a){$("#btnCloseModal").click();setTimeout(function(){$("#btnPostar").prop("disabled",!1)},2E3)}});a.preventDefault()});$.each($("#dropdown-notificacoes .aNotificacao"),function(a,b){$(b).click(function(a){$(location).attr("href",$(b).attr("href-notificacao"))})});$.each($('[id^\x3d"formComentar"]'),function(a,b){$(b).submit(function(a){console.log("deu submit!");var c=$(b).attr("post-target");comentarPost(c,$("#msgComentar"+
c).val());a.preventDefault()})})});function seguir(a){socket.emit("seguir",a)}socket.on("retornoSeguir",function(a){$("#btnSeguir").html("Seguir");1==a&&$("#btnSeguir").html("Seguindo")});function curtir(a){socket.emit("curtirPost",a)}socket.on("retornoCurtir",function(a){$("#qCurtiu"+a.idPost).html(a.qCurtiu);$("#btnLike"+a.idPost).css("color","black");1==a.isCurte&&$("#btnLike"+a.idPost).css("color","red")});function comentarPost(a,b){socket.emit("comentarPost",{id:a,msg:b})}
socket.on("retornoComentarPost",function(a){$("#comentarios"+a.idPost).append('\n\t\t\t\x3cdiv class\x3d"row"\x3e\n\t\t\t\t\x3cdiv class\x3d"col-xs-12"\x3e\n\t\t\t\t\t'+a.comentario.dono.nome+": "+a.comentario.descricao+"\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e")});function validaPesquisa(a){return""!==a.trim()};